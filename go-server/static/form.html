<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Go Server • Form</title>
  <style>
    :root{
      --bg: #0b1020;
      --card: rgba(255,255,255,0.06);
      --text: #e8eefc;
      --muted: #adbbda;
      --brand: #7c9aff;
      --brand-2: #9a7cff;
      --ring: rgba(124,154,255,0.6);
      --bad: #ff6b6b;
      --good: #37d67a;
      --radius: 18px;
      --shadow: 0 20px 40px rgba(0,0,0,0.35);
      --glass: blur(10px) saturate(150%);
    }
    @media (prefers-color-scheme: light) {
      :root{
        --bg: #f7f8ff;
        --card: rgba(0,8,40,0.04);
        --text: #0b1020;
        --muted: #3c4d6e;
        --brand: #335bff;
        --brand-2: #7a3bff;
        --ring: rgba(51,91,255,0.35);
      }
    }
    *{ box-sizing: border-box; }
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      color: var(--text);
      background:
        radial-gradient(1000px 1000px at -10% -10%, rgba(124,154,255,0.15), transparent 60%),
        radial-gradient(900px 900px at 110% 0%, rgba(154,124,255,0.12), transparent 60%),
        linear-gradient(180deg, var(--bg), #060914 45%, #06070f);
      padding: 24px;
    }
    .shell{
      width: min(820px, 100%);
      background: var(--card);
      border:1px solid rgba(255,255,255,.08);
      border-radius: calc(var(--radius) + 8px);
      box-shadow: var(--shadow);
      backdrop-filter: var(--glass);
      overflow:hidden;
    }
    .top{
      padding: 20px 22px; display:flex; align-items:center; justify-content:space-between;
      gap:12px; border-bottom:1px solid rgba(255,255,255,.1);
    }
    .top a{ color: var(--text); text-decoration:none; font-weight:700; opacity:.9; }
    .top .right a{ padding:8px 12px; border-radius: 12px; }
    .top .right a:hover{ background: rgba(255,255,255,.06); }

    .wrap{
      display:grid; gap:0; grid-template-columns: 1fr; align-items:stretch;
    }
    @media (min-width: 860px){
      .wrap{ grid-template-columns: 1.05fr .95fr; }
    }

    .pane{
      padding: 22px;
    }
    .pane h2{ margin: 8px 0 10px; }
    .muted{ color: var(--muted); margin-top:0; }

    form{
      display:grid; gap:14px; margin-top: 10px;
    }
    label{ font-weight:700; }
    .field{
      display:flex; flex-direction:column; gap:8px;
    }
    input[type="text"]{
      width:100%; padding:14px 14px;
      border-radius: 14px; border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25); color: var(--text); font-size:16px;
      outline:none; transition: box-shadow .15s ease, border-color .15s ease, background .2s ease;
    }
    input[type="text"]:focus{
      border-color: var(--brand);
      box-shadow: 0 0 0 4px var(--ring);
      background: rgba(0,0,0,.35);
    }
    .hint{ font-size: 13px; color: var(--muted); display:flex; justify-content:space-between; }
    .hint .count{ opacity:.9; }
    .error{ color: var(--bad); font-weight:700; display:none; }
    .ok{ color: var(--good); font-weight:700; display:none; }

    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 6px; }
    .btn{
      appearance:none; border:0; cursor:pointer; font-weight:800; letter-spacing:.2px;
      padding: 12px 16px; border-radius: 14px; color:white;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      box-shadow: 0 10px 24px rgba(124,154,255,.35);
      transition: transform .2s ease, filter .2s ease;
    }
    .btn:hover{ transform: translateY(-2px); filter: brightness(1.05); }
    .btn.secondary{
      background: transparent; color: var(--text); border:1px solid rgba(255,255,255,.18);
      box-shadow:none;
    }

    .preview{
      height:100%; background: rgba(0,0,0,.15);
      border-left:1px solid rgba(255,255,255,.08);
    }
    .card{
      margin: 22px; padding: 18px; border-radius: 16px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
    }
    .kv{
      display:grid; grid-template-columns: 120px 1fr; gap:10px; align-items:center;
      padding: 10px 0; border-bottom:1px dashed rgba(255,255,255,.16);
    }
    .kv:last-child{ border-bottom:0; }
    .k{ color: var(--muted); font-weight:700; }
    .v{ font-weight:800; letter-spacing:.2px; }

    .toast{
      position: fixed; bottom: 18px; right: 18px; padding: 12px 14px;
      background: rgba(0,0,0,.7); color:white; border-radius: 12px; font-weight:700;
      opacity:0; transform: translateY(8px); transition: .25s ease; pointer-events:none;
    }
    .toast.show{ opacity:1; transform: translateY(0); }
  </style>
</head>
<body>
  <div class="shell" role="region" aria-label="Form Shell">
    <div class="top">
      <a href="/">← Home</a>
      <div class="right">
        <a href="/hello">/hello</a>
        <a href="https://go.dev/" target="_blank" rel="noreferrer">Go.dev ↗</a>
      </div>
    </div>

    <div class="wrap">
      <div class="pane">
        <h2>Submit your details</h2>
        <p class="muted">This form posts to your Go handler at <code>/form</code>. Client-side validation + live preview included.</p>

        <form id="theForm" method="POST" action="/form" novalidate>
          <div class="field">
            <label for="name">Name</label>
            <input id="name" name="name" type="text" maxlength="40" required placeholder="e.g., Ameer Hamza" />
            <div class="hint">
              <span>Required • 2–40 chars</span>
              <span class="count" id="nameCount">0/40</span>
            </div>
            <div class="error" id="nameErr">Name must be at least 2 characters.</div>
            <div class="ok" id="nameOk">Looks good!</div>
          </div>

          <div class="field">
            <label for="address">Address</label>
            <input id="address" name="address" type="text" maxlength="80" required placeholder="e.g., Lahore, PK" />
            <div class="hint">
              <span>Required • 4–80 chars</span>
              <span class="count" id="addrCount">0/80</span>
            </div>
            <div class="error" id="addrErr">Address must be at least 4 characters.</div>
            <div class="ok" id="addrOk">Looks good!</div>
          </div>

          <div class="actions">
            <button class="btn" type="submit">Submit to /form</button>
            <button class="btn secondary" type="button" id="prefill">Prefill</button>
            <button class="btn secondary" type="reset">Reset</button>
          </div>
        </form>
      </div>

      <aside class="preview" aria-live="polite">
        <div class="card">
          <h3 style="margin:6px 0 10px;">Live Preview</h3>
          <div class="kv"><div class="k">Name</div><div class="v" id="pName">—</div></div>
          <div class="kv"><div class="k">Address</div><div class="v" id="pAddr">—</div></div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;">Tips</h3>
          <p class="muted">You can test via terminal: <code>curl -X POST -d "name=Ali&address=Lahore" http://localhost:8080/form</code></p>
        </div>
      </aside>
    </div>
  </div>

  <div class="toast" id="toast">Submitted! Check server response.</div>

  <script>
    const $ = (s) => document.querySelector(s);

    const nameEl = $('#name');
    const addrEl = $('#address');
    const nameCount = $('#nameCount');
    const addrCount = $('#addrCount');
    const nErr = $('#nameErr'), aErr = $('#addrErr');
    const nOk = $('#nameOk'), aOk = $('#addrOk');
    const pName = $('#pName'), pAddr = $('#pAddr');
    const toast = $('#toast');

    const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

    function updateCounts(){
      nameCount.textContent = `${nameEl.value.length}/40`;
      addrCount.textContent = `${addrEl.value.length}/80`;
    }
    function validate(){
      const n = nameEl.value.trim();
      const a = addrEl.value.trim();
      const nGood = n.length >= 2 && n.length <= 40;
      const aGood = a.length >= 4 && a.length <= 80;

      nErr.style.display = nGood ? 'none' : 'block';
      aErr.style.display = aGood ? 'none' : 'block';
      nOk.style.display = nGood ? 'block' : 'none';
      aOk.style.display = aGood ? 'block' : 'none';
      return nGood && aGood;
    }
    function updatePreview(){
      pName.textContent = nameEl.value.trim() || '—';
      pAddr.textContent = addrEl.value.trim() || '—';
    }
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 1600);
    }

    nameEl.addEventListener('input', () => { updateCounts(); validate(); updatePreview(); });
    addrEl.addEventListener('input', () => { updateCounts(); validate(); updatePreview(); });

    $('#prefill').addEventListener('click', () => {
      const samples = [
        { name: 'Ameer Hamza', address: 'Lahore, PK' },
        { name: 'Aleena', address: 'Karachi, PK' },
        { name: 'Zain', address: 'Islamabad, PK' }
      ];
      const pick = samples[Math.floor(Math.random() * samples.length)];
      nameEl.value = pick.name;
      addrEl.value = pick.address;
      updateCounts(); validate(); updatePreview();
    });

    // Submit: keep normal POST to /form (server will respond).
    // We also add a little UX feedback before navigation.
    $('#theForm').addEventListener('submit', (e) => {
      if (!validate()){
        e.preventDefault();
        showToast('Please fix validation errors.');
        // focus first invalid
        if ($('#nameErr').style.display === 'block') nameEl.focus();
        else addrEl.focus();
        return;
      }
      showToast('Submitting...');
    });

    // initialize
    updateCounts(); validate(); updatePreview();

    // Keyboard: Ctrl/Cmd+Enter to submit
    window.addEventListener('keydown', (e) => {
      const isCmd = navigator.platform.match('Mac');
      if ((isCmd ? e.metaKey : e.ctrlKey) && e.key.toLowerCase() === 'enter'){
        $('#theForm').requestSubmit();
      }
    });
  </script>
</body>
</html>
